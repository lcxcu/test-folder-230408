使用的是SALib中的morris函数：
Morris简单的代码实现：

- 定义初始值这里写作ylab :  $y= X_0 t^2 + X_1 t + X_2$
- 定义采样理论值写作ytheory  :  $y=X_0 t^2 + X_1 t + X_2$
- ylab 与 theory之间的平方差记作yerror，记录在数组Y中

```python
#先引入我们需要的包
from SALib.sample import saltelli
from SALib.analyze import sobol
from SALib.analyze import morris
from SALib.test_functions import Ishigami
import numpy as np 
import math 
from SALib.plotting.bar import plot as barplot
import matplotlib.pyplot as plt
import pandas as pd

# 验证的函数是:y=ax^2+bx+cy 
# 这里对函数灵敏度有影响的参数是a , b , c
# 下面事先定义他们的可能的范围
#定义一个字典
problem = {
    'num_vars':3,
    'names':['x1', 'x2', 'x3'],
    'bounds':[[2, 4],[5, 8],[0, 1]]
}

param_values = saltelli.sample(problem,1000)
np.savetxt("param_values.txt", param_values)
#将参数变化保存，其实是个参数范围内的sobol（全局均匀）抽样
# print(param_values.shape)
Y = np.zeros([param_values.shape[0]])
# param_values：参数值

for i,X in enumerate(param_values):
    tarr = np.linspace(0, 1, 3)
    yerror = 0.0;
    for t in tarr:
        ylab = 2*t**2+3*t+4; # 假定的参数值所得y值
        ytheory = X[0]*t**2+X[1]*t+X[2]; # morrir测试的
        yerror = yerror+(ylab-ytheory)**2;
    Y[i] = math.sqrt(yerror);


Si = morris.analyze(problem,param_values,Y,print_to_console=True)
print("the mean elementary effect mu:")
print(Si['mu'])#the mean elementary effect
print("the absolute of the mean elementary effect mu_star:")
print(Si['mu_star'])#the absolute of the mean elementary effect
print("the standard deviation of the elementary effect sigma sigma:")
print(Si['sigma'])#the standard deviation of the elementary effect

from SALib.plotting.bar import plot as barplot
import matplotlib.pyplot as plot
Si_df = Si.to_df()
print(Si_df)
barplot(Si_df)
```
计算出敏感指数的平均灵敏、平均灵敏度的绝对值和灵敏度的标准差
结果如下：
```python
          mu   mu_star     sigma  mu_star_conf
x1  0.183048  3.255688  4.401225      0.137893
x2  0.143914  6.169109  6.212374      0.033500
x3 -0.610358  3.328125  4.378460      0.137083
the mean elementary effect mu:
[ 0.18304814  0.14391386 -0.61035832]
the absolute of the mean elementary effect mu_star:
[3.2556881665404074 6.169109293203692 3.328124741601692]
the standard deviation of the elementary effect sigma sigma:
[4.40122503 6.21237411 4.37845968]
          mu   mu_star     sigma  mu_star_conf
x1  0.183048  3.255688  4.401225      0.137893
x2  0.143914  6.169109  6.212374      0.033500
x3 -0.610358  3.328125  4.378460      0.137083
```
![[Figure_1.png]]
$x_1,x_2,x_3$分别对应$y = ax^2+bx+c$中的$a,b,c$


---

- 以及一些正在研究中的shap代码：[A Complete SHAP Tutorial: How to Explain Any Black-box ML Model in Python | by Bex T. | Towards Data Science](https://towardsdatascience.com/a-complete-shap-tutorial-how-to-explain-any-black-box-ml-model-in-python-7538d11fae94)