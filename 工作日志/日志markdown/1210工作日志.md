>明天将继续`select_and_forecast`方法，其中参数较多，若长时间研究无果改使用`average_forecast`方法进行预测模型的选择和评价

1. 用midasr包中midas_r_ic_table进行模型最佳滞后阶数与模型选择:
- 比如按照以下结果`yy1 ~ mls(yy1, 1:3, m = 1) + mls(xx1, 84:419, 84, nbeta), start = list(xx1= c(1.7, 1,5) `是较为恰当的模型选择 

```R
mwlr1 <- midas_r_ic_table(yy1 ~ mls(yy1, 1:3 ,m = 1) + mls(xx1,84:251, 84 ,nealmon),
						 table=list(xx1=list(
						 weights=as.list(c("nealmon", 
						 "nealmon","nbeta")),
						 lags=list(84:251,84:335,84:419),
						 starts=list(c(1, -0.5),c(2, 0.5, -0.1),c(1.7, 1,5)))))
```

```R
mwlr2 <- midas_r_ic_table(yy1 ~ mls(yy1, 1:3 ,m = 1) + mls(xx1,84:251, 84 ,nealmon),
						 table=list(xx1=list(
						 weights=as.list(c("nealmon", 
						 "nealmon","nbeta")),
						 lags=list(84:503,84:587,84:671),
						 starts=list(c(1, -0.5),c(2, 0.5, -0.1),c(1.7, 1,5)))))
```

选择模型：
```R
mod1_r <- modsel(mwlr1, IC = "AIC", type = "restricted")



 Selected model with AIC  =  0.06119649 
 Based on restricted MIDAS regression model
 The p-value for the null hypothesis of the test hAh_test is NA 

MIDAS regression model with "NULL" data:
Start = , End = 

 Formula yy1 ~ mls(yy1, 1:3, m = 1) + mls(xx1, 84:419, 84, nbeta) 

 Parameters:
              Estimate Std. Error    t value Pr(>|t|)    
(Intercept) -8.463e-02  2.709e-14 -3.124e+12 2.04e-13 ***
yy11        -8.927e-01  4.653e-14 -1.919e+13 3.32e-14 ***
yy12        -9.180e-01  5.346e-15 -1.717e+14 3.71e-15 ***
yy13        -1.012e+00  5.992e-15 -1.688e+14 3.77e-15 ***
xx11         3.726e+01  1.161e-12  3.209e+13 1.98e-14 ***
xx12         9.844e-01  4.939e-15  1.993e+14 3.19e-15 ***
xx13         4.350e+00  4.394e-13  9.900e+12 6.43e-14 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

 Residual standard error: 0.2527 on 1 degrees of freedom
```

```R
mod1_u <- modsel(mwlr1, IC = "BIC", type = "restricted") 



Selected model with BIC  =  0.6967288 
 Based on restricted MIDAS regression model
 The p-value for the null hypothesis of the test hAh_test is NA 

MIDAS regression model with "NULL" data:
Start = , End = 

 Formula yy1 ~ mls(yy1, 1:3, m = 1) + mls(xx1, 84:419, 84, nbeta) 

 Parameters:
              Estimate Std. Error    t value Pr(>|t|)    
(Intercept) -8.463e-02  2.709e-14 -3.124e+12 2.04e-13 ***
yy11        -8.927e-01  4.653e-14 -1.919e+13 3.32e-14 ***
yy12        -9.180e-01  5.346e-15 -1.717e+14 3.71e-15 ***
yy13        -1.012e+00  5.992e-15 -1.688e+14 3.77e-15 ***
xx11         3.726e+01  1.161e-12  3.209e+13 1.98e-14 ***
xx12         9.844e-01  4.939e-15  1.993e+14 3.19e-15 ***
xx13         4.350e+00  4.394e-13  9.900e+12 6.43e-14 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

 Residual standard error: 0.2527 on 1 degrees of freedom
```

其中常遇到的报错已解决：
- `Error in table$weights[[i]] : subscript out of bounds`: 在函数`midas_r_ic_table`中lag 参数list只能有3项滞后序列，多于三项即报错

2. 研究模型预测
   将数据分为样本内和样本外
```R
fulldata <- list(xx = window(nx, start = c(1985, 1), end = c(2011, 6)), yy = window(ny, start = c(1985, 1), end = c(2011, 2)))
```

```R
cbfc<-select_and_forecast(yy1 ~ mls(yy1, 1:3 ,m = 1) + mls(xx1,84:419, 84, nbeta), 
						from=list(xx1=c(4,8,12)),
						to=list(xx1=rbind(c(14,19),c(18,23),c(22,27))),
						insample=1:12,
						outsample=13:21,
						weights=list(x=c("nealmon","almonp"),z=c("nealmon","almonp")),
						wstart=list(nealmon=rep(1,3),almonp=rep(1,3)), 
						IC="AIC",  
						seltype="restricted",  
						ftype="fixed",  
						measures=c("MSE","MAPE","MASE"),  
						fweights=c("EW","BICW","MSFE","DMSFE"))
```


> Error in kmin:kmax : result would be too long a vector
In addition: Warning messages:
1: In min(to) : no non-missing arguments to min; returning Inf
2: In max(to) : no non-missing arguments to max; returning -Inf
