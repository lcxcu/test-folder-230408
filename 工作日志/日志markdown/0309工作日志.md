- 模型学习参考链接:[How to Evaluate the Skill of Deep Learning Models - MachineLearningMastery.com](https://machinelearningmastery.com/evaluate-skill-deep-learning-models/)
- 将数据转换成模型需要的格式（数据预处理）
这里是变量 8~13的整理：宏观经济月度频率数据的处理过程
```python
# 变量 8~13 ：宏观经济月度频率数据 
k_list = [i for i in range(8,14)]
nvar_list = ['Industrial_production','Inflation','Oil_prices','T-bill_yield','Term_Spread','default_spread']
def monthly_fred(k,new_var):
    src_file = "/mnt/Data_US/src_monthly/"+str(k)+"_"+new_var+".csv"
    df = pd.read_csv(src_file,low_memory = False)
    df = df.drop(columns = ['Unnamed: 0'])
    try:
        df = df.drop(columns = ['Unnamed: 0.1'])   
    except KeyError:
        print('KeyError:缺少该字段')
    df['datadate'] = df['DATE'].apply(lambda x: convert_date(x)) # 日期格式转换为YYYYMMDD格式
    df = df.drop(columns = 'DATE')
    return df
df_fred = [0 for i in range(len(k_list))]
# 宏观经济月度频率数据读取
for k , nvar in zip(k_list ,nvar_list):
    # print("/mnt/Data_US/src_monthly/"+str(k)+"_"+nvar+".csv")
    df_fred[k_list.index(k)] = monthly_fred(k,nvar)
# 数据表连接
def connect_df(df_list):
    for i in range(0,len(df_list)-1):
        print(i)
        df_list[i+1] = pd.merge(df_list[i],df_list[i+1],on = 'datadate',how = 'outer')
    return df_list[len(df_list)-1]
df_var8to13 = connect_df(df_fred)
df_var8to13 = df_var8to13.drop(columns = ['monthly_variation_x','monthly_variation_y'])
df_var8to13 = df_var8to13.merge(monthly_fred(13,'default_spread'),on = 'datadate',how = 'left')
```
处理结果：
![[Pasted image 20230310003044.png]]

