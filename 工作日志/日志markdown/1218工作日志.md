1. 数据处理：
周度数据问题同日度数据，每季度的周数并不同：
有的季度一季度13周，有的季度14周，有的季度12周，有的季度11周，通过代码让每个季度只保留前12周。
```R
年    季度                 
2017 4    4    4   4   4
2018 1   13   13  13  13
     2   13   13  13  13
     3   13   13  13  13
     4   12   12  12  12
2019 1   12   12  12  12
     2   13   13  13  13
     3   14   14  14  14
     4   13   13  13  13
2020 1   12   12  12  12
     2   13   13  13  13
     3   14   14  14  14
     4   13   13  13  13
2021 1   12   12  12  12
     2   13   13  13  13
     3   14   14  14  14
     4   13   13  13  13
2022 1   11   11  11  11
     2   13   13  13  13
     3   14   14  14  14
     4    7    7   7   7
```
2. 模型拟合
   - 只用周度的股票涨幅拟合模型
```R
eq_r3 <- midas_r(yy ~ mls(yy, 1:3, m = 1) + mls(zz ,12:59,12,nbeta) , start = list(zz= c(1.7, 1,5)))
```
![[Pasted image 20221219021450.png]]
整体预测结果：
![[Pasted image 20221219030114.png]]

- 结合周度与日度数据拟合模型
```R
eq_r <- midas_r(yy ~ mls(yy, 1, m = 1) + mls(xx, 84:251, 84, nbeta) + mls(zz ,12:35,12,nbeta) , start = list(xx= c(1.7, 1,5),zz= c(1.7, 1,5)))
```
![[Pasted image 20221219014151.png]]
整体预测趋势：
![[Pasted image 20221219025925.png]]

```R
eq_r1 <- midas_r(yy ~ mls(yy, 1:3, m = 1) + mls(xx, 84:251, 84, nbeta) + mls(zz ,12:35,12,nbeta) , start = list(xx= c(1.7, 1,5),zz= c(1.7, 1,5)))
```
![[Pasted image 20221219014707.png]]
整体预测趋势：
![[Pasted image 20221219025938.png]]

- 只用日度数据的最佳模型
```R
eq_r2<- midas_r(yy ~ mls(yy, 1:3, m = 1) + mls(xx, 84:335, 84, nbeta) , start = list(xx= c(1.7, 1,5)))
summary(eq_r2)
```
![[Pasted image 20221219030440.png]]
整体预测：
![[Pasted image 20221219031116.png]]

``` R
eq_r3 <- midas_r(yy ~ mls(yy, 1:3, m = 1) + mls(xx, 84:419, 84, nbeta) , start = list(xx= c(1.7, 1,5)))
```
![[Pasted image 20221219025000.png]]
整体预测：
![[Pasted image 20221219025856.png]]

>限制性模型似乎因为变量过多，拟合出结果并不能使用（只缩小到最少的12个变量时拟合于预测的结果仍只有NA）


![[Pasted image 20221219022845.png]]
![[Pasted image 20221219023020.png]]