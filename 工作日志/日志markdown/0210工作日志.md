1. 完成自科申请书内容的整体修改。([如何下载国家自然科学基金申请书的模板\_jbb0523的博客-CSDN博客\_国自然申请书模板在哪下载](https://blog.csdn.net/jbb0523/article/details/124998081))
2. 完成**分析师的共识估计**基准模型的建立。
分析师共识估计模型建立代码（数据预处理部分已省略）：
```python
import pandas as pd
df_ana = pd.read_csv('all_ana_eps.gz')
df_act = pd.read_csv('all_act_eps.gz')
df = df_act.merge(df_ana, on = ['TICKER', 'FPEDATS'], how = 'left')

def clean_colnames(df):
    new_colnames = []
    for col in df.columns:
        if "_x" in col:
            new_colnames.append(col.replace("_x", ""))
        elif "_y" in col:
            df = df.drop(columns = col)
        else:
            new_colnames.append(col)
    df.columns = new_colnames
    return df

df_all_eps = clean_colnames(df) # 删去合并真实值与预测值后重复的列

# 分组操作，按照TICKER和fyearq分组
df = df_all_eps
grouped = df.groupby(['TICKER', 'fyearq'])
# 应用shift方法，移动上一季度ACTUAL的值到该季度
df['prev_actual'] = grouped['ACTUAL'].shift(1)
# 计算该季度的mid_value减去上一季度的ACTUAL
df['delta_analyst'] = df['mid_value'] - df['prev_actual']
df = df.drop(columns = ['prev_actual','ACTUAL','mid_value'])
df_all_eps = df.dropna()

df_all_eps.to_csv('delta_E_Analyst.gz', compression='gzip', index=False)
```

3. 建立深度学习预测EPS模型
模型采用以下特征变量

变量 1：inventory 季度频率数据
变量 2：accounts receivable 季度频率数据
变量 3 ：capital expenditures 季度频率数据
变量 4 ：gross margin 季度频率数据
变量 5 ：SG&A 季度频率数据
变量 6 : Abnormal stock return 月度频率数据 
变量 7 ：Return volatility 月度频率数据 
变量 8 ：INDPRO 月度频率数据 
变量 9 : CPIAUCSL 月度频率数据 
变量 10 : MCOILWTICO  月度频率数据 
变量 11 : TB3MS 月度频率数据 
变量 12 : term spread 月度频率数据 
变量 13 : default spread 月度频率数据 
变量 14 ：stock return 日度数据（1~30）